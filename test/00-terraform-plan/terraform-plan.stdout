[0m[1mRefreshing Terraform state in-memory prior to plan...[0m
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
[0m
[0m[1mtemplate_file.userdata: Refreshing state... (ID: 12a8416970192009b7a370e391608c8c9024090fea130920534cdcd70f2e1c6e)[0m
[0m[1mdata.terraform_remote_state.ami: Refreshing state...[0m
[0m[1maws_iam_instance_profile.default: Refreshing state... (ID: service-preprod-iam-instance-profile)[0m
[0m[1mdata.aws_sns_topic.site_problem: Refreshing state...[0m
[0m[1mdata.aws_s3_bucket.logs: Refreshing state...[0m
[0m[1mdata.aws_security_groups.asg: Refreshing state...[0m
[0m[1mdata.aws_route53_zone.default: Refreshing state...[0m
[0m[1mdata.aws_vpc.default: Refreshing state...[0m
[0m[1mdata.aws_sns_topic.911: Refreshing state...[0m
[0m[1mdata.aws_security_groups.elb: Refreshing state...[0m
[0m[1mdata.aws_ami.current: Refreshing state...[0m
[0m[1mdata.aws_ami.previous: Refreshing state...[0m
[0m[1mdata.aws_subnet_ids.elb: Refreshing state...[0m
[0m[1mdata.aws_subnet_ids.asg: Refreshing state...[0m
[0m[1maws_elb.default: Refreshing state... (ID: TF-PreProd-service)[0m
[0m[1maws_route53_record.default: Refreshing state... (ID: Z3SBAACLA5Z0RT_service_CNAME)[0m
[0m[1mdata.template_file.userdata: Refreshing state...[0m
[0m[1maws_launch_configuration.default: Refreshing state... (ID: terraform-20180907174650017100000001)[0m
[0m[1maws_launch_configuration.default: Refreshing state... (ID: terraform-20180907174650018400000002)[0m
[0m[1maws_autoscaling_group.default: Refreshing state... (ID: TF-PreProd-service-Blue)[0m
[0m[1maws_autoscaling_group.default: Refreshing state... (ID: TF-PreProd-service-Green)[0m
[0m[1maws_autoscaling_lifecycle_hook.scaleup_lifecycle_hook: Refreshing state... (ID: scaleup_lifecycle_hook)[0m

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  [33m~[0m update in-place
  [31m-[0m destroy
[31m-[0m/[32m+[0m destroy and then create replacement
[0m
Terraform will perform the following actions:

[33m  [33m~[0m [33mmodule.service.module.service.module.blue.aws_autoscaling_group.default
[0m      launch_configuration:           "terraform-20180907174650018400000002" => "${aws_launch_configuration.default.name}"
      vpc_zone_identifier.#:          "3" => "4"
      vpc_zone_identifier.2425442135: "subnet-33df1a6b" => "subnet-33df1a6b"
      vpc_zone_identifier.2622130864: "" => "subnet-ac7b95a3"
      vpc_zone_identifier.2844178450: "subnet-d354a2f9" => "subnet-d354a2f9"
      vpc_zone_identifier.892301951:  "subnet-d74eeda1" => "subnet-d74eeda1"
[0m
[0m[33m[31m-[0m/[32m+[0m [33mmodule.service.module.service.module.blue.aws_launch_configuration.default [31m[1m(new resource required)[0m
[0m      id:                             "terraform-20180907174650018400000002" => <computed> [31m(forces new resource)[0m
      associate_public_ip_address:    "false" => "false"
      ebs_block_device.#:             "0" => <computed>
      ebs_optimized:                  "false" => <computed>
      enable_monitoring:              "true" => "true"
      iam_instance_profile:           "service-preprod-iam-instance-profile" => "service-preprod-iam-instance-profile"
      image_id:                       "ami-2ee6dd51" => "ami-02e806e34d2d38ff1" [31m(forces new resource)[0m
      instance_type:                  "t2.large" => "t2.large"
      key_name:                       "preprod" => "preprod"
      name:                           "terraform-20180907174650018400000002" => <computed>
      root_block_device.#:            "0" => <computed>
      security_groups.#:              "2" => "2"
      security_groups.4240244144:     "sg-7f77b907" => "sg-7f77b907"
      security_groups.738606252:      "sg-7077b908" => "sg-7077b908"
      user_data:                      "f40d9e43ea200437d541bf25038ebec283843a06" => "e77f3cefede7a80e1da738a656f5cbe05f17574c" [31m(forces new resource)[0m
[0m
[0m[33m  [33m~[0m [33mmodule.service.module.service.module.elb.aws_elb.default
[0m      subnets.#:                      "3" => "4"
      subnets.2425442135:             "subnet-33df1a6b" => "subnet-33df1a6b"
      subnets.2622130864:             "" => "subnet-ac7b95a3"
      subnets.2844178450:             "subnet-d354a2f9" => "subnet-d354a2f9"
      subnets.892301951:              "subnet-d74eeda1" => "subnet-d74eeda1"
      tags.%:                         "3" => "3"
      tags.env:                       "PreProd" => "preprod"
      tags.role:                      "service" => "service"
[0m
[0m[33m  [33m~[0m [33mmodule.service.module.service.module.green.aws_autoscaling_group.default
[0m      launch_configuration:           "terraform-20180907174650017100000001" => "${aws_launch_configuration.default.name}"
      max_size:                       "20" => "50"
      vpc_zone_identifier.#:          "3" => "4"
      vpc_zone_identifier.2425442135: "subnet-33df1a6b" => "subnet-33df1a6b"
      vpc_zone_identifier.2622130864: "" => "subnet-ac7b95a3"
      vpc_zone_identifier.2844178450: "subnet-d354a2f9" => "subnet-d354a2f9"
      vpc_zone_identifier.892301951:  "subnet-d74eeda1" => "subnet-d74eeda1"
[0m
[0m[33m[31m-[0m/[32m+[0m [33mmodule.service.module.service.module.green.aws_launch_configuration.default [31m[1m(new resource required)[0m
[0m      id:                             "terraform-20180907174650017100000001" => <computed> [31m(forces new resource)[0m
      associate_public_ip_address:    "false" => "false"
      ebs_block_device.#:             "0" => <computed>
      ebs_optimized:                  "false" => <computed>
      enable_monitoring:              "true" => "true"
      iam_instance_profile:           "service-preprod-iam-instance-profile" => "service-preprod-iam-instance-profile"
      image_id:                       "ami-02e806e34d2d38ff1" => "ami-0d7cf845f167feb29" [31m(forces new resource)[0m
      instance_type:                  "t2.large" => "t2.large"
      key_name:                       "preprod" => "preprod"
      name:                           "terraform-20180907174650017100000001" => <computed>
      root_block_device.#:            "0" => <computed>
      security_groups.#:              "2" => "2"
      security_groups.4240244144:     "sg-7f77b907" => "sg-7f77b907"
      security_groups.738606252:      "sg-7077b908" => "sg-7077b908"
      user_data:                      "f40d9e43ea200437d541bf25038ebec283843a06" => "e77f3cefede7a80e1da738a656f5cbe05f17574c" [31m(forces new resource)[0m
[0m
[0m[31m  [31m-[0m [31mmodule.service.module.service.module.user_data.template_file.userdata
[0m[0m
[0m
[0m[1mPlan:[0m 2 to add, 3 to change, 3 to destroy.[0m

------------------------------------------------------------------------

Note: You didn't specify an "-out" parameter to save this plan, so Terraform
can't guarantee that exactly these actions will be performed if
"terraform apply" is subsequently run.

